import{r as b,z as O,f as j,j as p,b as v,B as x,R as h,D as C}from"./index-b9a86917.js";function L(r){const{loading:e,src:o,srcSet:a,onLoad:s,onError:l,crossOrigin:u,sizes:d,ignoreFallback:f}=r,[c,g]=b.useState("pending");b.useEffect(()=>{g(o?"loading":"pending")},[o]);const t=b.useRef(),k=b.useCallback(()=>{if(!o)return;i();const n=new Image;n.src=o,u&&(n.crossOrigin=u),a&&(n.srcset=a),d&&(n.sizes=d),e&&(n.loading=e),n.onload=m=>{i(),g("loaded"),s==null||s(m)},n.onerror=m=>{i(),g("failed"),l==null||l(m)},t.current=n},[o,u,a,d,s,l,e]),i=()=>{t.current&&(t.current.onload=null,t.current.onerror=null,t.current=null)};return O(()=>{if(!f)return c==="loading"&&k(),()=>{i()}},[c,k,f]),f?"loaded":c}var w=(r,e)=>r!=="loaded"&&e==="beforeLoadOrError"||r==="failed"&&e==="onError";function y(r,e=[]){const o=Object.assign({},r);for(const a of e)a in o&&delete o[a];return o}var D=j(function(e,o){const{fallbackSrc:a,fallback:s,src:l,srcSet:u,align:d,fit:f,loading:c,ignoreFallback:g,crossOrigin:t,fallbackStrategy:k="beforeLoadOrError",referrerPolicy:i,...n}=e,m=a!==void 0||s!==void 0,I=c!=null||g||!m,F=L({...e,ignoreFallback:I}),R=w(F,k),S={ref:o,objectFit:f,objectPosition:d,...I?n:y(n,["onError","onLoad"])};return R?s||p(v.img,{as:x,className:"chakra-image__placeholder",src:a,...S}):p(v.img,{as:x,src:l,srcSet:u,crossOrigin:t,loading:c,referrerPolicy:i,className:"chakra-image",...S})});D.displayName="Image";function E(r=h){const e=r===h?C:()=>b.useContext(r);return function(){const{store:a}=e();return a}}const N=E();function z(r=h){const e=r===h?N:E(r);return function(){return e().dispatch}}const H=z();export{D as I,H as u};
